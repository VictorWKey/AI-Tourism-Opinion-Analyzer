# Test Datasets for Column Validation

This directory contains test datasets with different column combinations to validate the application's handling of optional columns.

## Dataset Descriptions

### Case 1: Minimal Required Column Only
**File:** `case1_only_review.csv`
- **Columns:** Review
- **Purpose:** Test the absolute minimum requirement - only the Review column is present
- **Expected Behavior:** 
  - Should process successfully
  - No temporal analysis available
  - Calificacion (star rating) should be auto-generated by sentiment model
  - No title merging

### Case 2: Review with Title
**File:** `case2_review_titulo.csv`
- **Columns:** Titulo, Review
- **Purpose:** Test title + review merging functionality
- **Expected Behavior:**
  - Should merge Titulo and Review into TituloReview column
  - No temporal analysis available
  - Calificacion should be auto-generated by sentiment model

### Case 3: Review with Dates
**File:** `case3_review_fechas.csv`
- **Columns:** Review, FechaEstadia
- **Purpose:** Test temporal analysis capabilities
- **Expected Behavior:**
  - Should enable temporal visualizations
  - Date conversion should work properly
  - Calificacion should be auto-generated by sentiment model

### Case 4: Review with User-Provided Rating
**File:** `case4_review_calificacion.csv`
- **Columns:** Review, Calificacion
- **Purpose:** Test handling of pre-existing ratings
- **Expected Behavior:**
  - Should use existing Calificacion values
  - Should NOT overwrite with model predictions
  - No temporal analysis available

### Case 5: Multiple Optional Columns (No Rating)
**File:** `case5_review_titulo_fechas.csv`
- **Columns:** Titulo, Review, FechaEstadia
- **Purpose:** Test combination of title + dates without rating
- **Expected Behavior:**
  - Should merge title and review
  - Should enable temporal analysis
  - Calificacion should be auto-generated by sentiment model

### Case 6: All Columns Present
**File:** `case6_all_columns.csv`
- **Columns:** Titulo, Review, FechaEstadia, Calificacion
- **Purpose:** Test full dataset with all optional columns
- **Expected Behavior:**
  - Should merge title and review
  - Should enable temporal analysis
  - Should use existing Calificacion values
  - All visualizations should be available

### Case 7: Partial Date Data
**File:** `case7_review_partial_fechas.csv`
- **Columns:** Review, FechaEstadia (with ~33% missing values)
- **Purpose:** Test handling of datasets with incomplete date information
- **Expected Behavior:**
  - Should process successfully despite missing dates
  - Temporal analysis should work with available date data
  - Rows with missing dates should not be excluded by fase_01
  - Calificacion should be auto-generated by sentiment model

## Testing Guidelines

1. **Test each dataset individually** through the application's import functionality
2. **Verify column mapping dialog** shows correct required/optional status
3. **Check validation messages** confirm which analyses are available
4. **Inspect generated visualizations** to ensure only appropriate charts are created
5. **Verify Calificacion column** presence after fase_02 (should exist even if not in original dataset)

## Expected Validation Messages

- **Case 1-3, 5, 7:** "⭐ Columna 'Calificacion' generada a partir del modelo"
- **Cases without FechaEstadia:** "⚠️ Análisis temporal no disponible sin columna FechaEstadia"
- **All cases:** Should indicate "✓ Review (columna requerida) presente"

## Key Validation Points

### Column Requirements (Updated)
- ✅ **Review:** REQUIRED - app should fail/warn if missing
- ⚠️ **Titulo:** OPTIONAL - merges with Review if present
- ⚠️ **FechaEstadia:** OPTIONAL - gates temporal analysis
- ⚠️ **Calificacion:** OPTIONAL - auto-generated if missing

### Backward Compatibility
All test cases should maintain backward compatibility:
- Existing datasets with all columns should work normally
- New behavior only activates when columns are missing
- No breaking changes to pipeline phases

## Row Count
All test datasets contain **50 rows** from the original dataset for manageable testing.
